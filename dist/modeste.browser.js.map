{"version":3,"file":"modeste.browser.js","sources":["../src/constants.js","../src/component/shouldUpdateData.js","../src/component/shouldUpdateProps.js","../src/utils/shallowCompare.js","../src/component/registerHooks.js","../src/component/emitHook.js","../src/utils/generateId.js","../src/component/generateScope.js","../src/dom/addStyles.js","../src/vDom/createElementNode.js","../src/utils/toKebabCase.js","../src/vDom/createComponentNode.js","../src/vDom/addClass.js","../src/component/createComponent.js","../src/component/emitMount.js","../src/dom/createDom.js","../src/utils/assign.js","../src/component/setProps.js","../src/component/removeComponent.js","../src/dom/updateDom.js","../src/dom/updateComponentDom.js","../src/dom/sameTypeAndTag.js","../src/utils/ModesteError.js","../src/component/render.js","../src/utils/promiseCall.js","../src/utils/asyncCall.js","../src/utils/immediateCall.js","../src/utils/timeoutCall.js","../src/component/asyncRender.js","../src/component/Component.js","../src/component/registerComponent.js","../src/main.js"],"sourcesContent":["export const ROOT_NAME = 'modesteRoot';\r\nexport const INTERNAL_VAR_NAME = '__modesteInternal';\r\n\r\nexport const COMMENT_NODE = window.Node.COMMENT_NODE;\r\nexport const ELEMENT_NODE = window.Node.ELEMENT_NODE;\r\nexport const TEXT_NODE = window.Node.TEXT_NODE;\r\n","export default function shouldUpdateData(oldValue, newValue) {\r\n  return oldValue !== newValue;\r\n}\r\n","import shallowCompare from '../utils/shallowCompare';\r\n\r\nexport default function shouldUpdateProps(oldProps, newProps) {\r\n  return !shallowCompare(oldProps, newProps);\r\n}\r\n","export default function shallowCompare(a, b) {\r\n  let aKeys = Object.keys(a);\r\n  let bKeys = Object.keys(b);\r\n\r\n  if (aKeys.length !== bKeys.length) return false;\r\n\r\n  for (let i = 0; i < aKeys.length; i++) {\r\n    let key = aKeys[i];\r\n    let index = bKeys.indexOf(key);\r\n\r\n    if (index < 0) return false;\r\n    if (a[key] !== b[key]) return false;\r\n  }\r\n\r\n  return true;\r\n}\r\n","import { INTERNAL_VAR_NAME as m } from '../constants';\r\n\r\nconst HOOKS = [\r\n  'willCreate',\r\n  'didCreate',\r\n  'willMount',\r\n  'didMount',\r\n  'willUpdate',\r\n  'didUpdate',\r\n  'willRemove',\r\n  'didRemove',\r\n  'shouldUpdateData',\r\n  'shouldUpdateProps'\r\n];\r\n\r\nexport default function registerHooks(component, manifest) {\r\n  HOOKS.forEach(hook => {\r\n    if (manifest[hook]) component[m][hook] = manifest[hook].bind(component);\r\n  });\r\n}\r\n","import { INTERNAL_VAR_NAME as m } from '../constants';\r\n\r\nexport default function emitHook(component, hook) {\r\n  if (component[m][hook]) component[m][hook]();\r\n}\r\n","const ID_RND_LENGTH = 6;\r\nlet idCounter = 0;\r\n\r\nexport default function generateId(middleware) {\r\n  let random = Math.random()\r\n    .toString(36)\r\n    .substr(2, ID_RND_LENGTH);\r\n\r\n  let id =\r\n    random +\r\n    '0'.repeat(ID_RND_LENGTH - random.length) +\r\n    (idCounter++).toString(36);\r\n\r\n  if (middleware) return middleware(id);\r\n  return id;\r\n}\r\n","import generateId from '../utils/generateId';\r\n\r\nexport default function generateScope(name) {\r\n  return generateId(id => `${name}_${id}`);\r\n}\r\n","export default function addStyles(style, scope) {\r\n  if (!style) return;\r\n\r\n  let styleElement = document.createElement('style');\r\n\r\n  if (scope) {\r\n    let regex = /:scoped([^\\w\\d])/gm;\r\n    let repl = '.' + scope + '$1';\r\n\r\n    styleElement.textContent = style.replace(regex, repl);\r\n  } else {\r\n    styleElement.textContent = style;\r\n  }\r\n\r\n  document.head.appendChild(styleElement);\r\n\r\n  return styleElement;\r\n}\r\n","import toKebabCase from '../utils/toKebabCase';\r\n\r\nexport default function createElementNode(tag, opts, children) {\r\n  let props = {};\r\n  let attrs = {};\r\n\r\n  let node = { tag, props, attrs };\r\n\r\n  if (opts) {\r\n    if (opts instanceof Array) {\r\n      children = opts;\r\n    } else {\r\n      Object.keys(opts).forEach(key => {\r\n        switch (key[0]) {\r\n          case '_':\r\n            attrs[toKebabCase(key.substr(1))] = opts[key];\r\n            break;\r\n          case '$':\r\n            node[key.substr(1)] = opts[key];\r\n            break;\r\n          default:\r\n            props[key] = opts[key];\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  node.children = children ? children : [];\r\n\r\n  return node;\r\n}\r\n","export default function toKebabCase(str) {\r\n  let kebab = str.replace(/([A-Z])/g, '-$1').toLowerCase();\r\n  if (kebab[0] === '-') return kebab.substr(1);\r\n  return kebab;\r\n}\r\n","export default function createComponentNode(component, opts) {\r\n  let props = {};\r\n  let node = { component, props };\r\n\r\n  if (opts) {\r\n    Object.keys(opts).forEach(key => {\r\n      switch (key[0]) {\r\n        case '$':\r\n          node[key.substr(1)] = opts[key];\r\n          break;\r\n        default:\r\n          props[key] = opts[key];\r\n      }\r\n    });\r\n  }\r\n\r\n  return node;\r\n}\r\n","export default function addClass(vDom, className) {\r\n  if (!vDom || typeof vDom === 'string' || vDom.component || !className) return;\r\n  if (!vDom.props.className) vDom.props.className = '';\r\n  if (!vDom.attrs.class) vDom.attrs.class = '';\r\n\r\n  vDom.props.className = `${vDom.props.className} ${className}`.trim();\r\n  vDom.attrs.class = `${vDom.attrs.class} ${className}`.trim();\r\n}\r\n","import { INTERNAL_VAR_NAME as m } from '../constants';\r\n\r\nexport default function createComponent(name, props, parent) {\r\n  if (parent[m].factories[name]) {\r\n    return parent[m].factories[name](props, parent);\r\n  }\r\n\r\n  return parent[m].app[m].factories[name](props, parent);\r\n}\r\n","import { INTERNAL_VAR_NAME as m } from '../constants';\r\nimport emitHook from './emitHook';\r\n\r\nexport default function emitMount(component) {\r\n  let children = component[m].children;\r\n  Object.keys(children).forEach(key => emitMount(children[key]));\r\n\r\n  component[m].mounted = true;\r\n  emitHook(component, 'didMount');\r\n}\r\n","import { INTERNAL_VAR_NAME as m } from '../constants';\r\nimport addClass from '../vDom/addClass';\r\nimport createComponent from '../component/createComponent';\r\nimport render from '../component/render';\r\nimport emitMount from '../component/emitMount';\r\n\r\nexport default function createDom(vDom, parent) {\r\n  if (parent) addClass(vDom, parent[m].scope);\r\n\r\n  if (!vDom) {\r\n    return document.createComment('');\r\n  }\r\n\r\n  switch (typeof vDom) {\r\n    case 'string':\r\n      return document.createTextNode(vDom);\r\n\r\n    case 'object':\r\n      if (vDom.component) {\r\n        let component = createComponent(vDom.component, vDom.props, parent);\r\n\r\n        if (vDom.ref) vDom.ref(component);\r\n\r\n        render(component);\r\n\r\n        if (vDom.key) component[m].dom[m].key = vDom.key;\r\n        return component[m].dom;\r\n      }\r\n\r\n      let dom = document.createElement(vDom.tag);\r\n\r\n      dom[m] = {};\r\n      dom[m].attrs = {};\r\n      dom[m].props = {};\r\n\r\n      Object.keys(vDom.attrs).forEach(attr => {\r\n        if (vDom.attrs[attr] !== null) {\r\n          dom.setAttribute(attr, vDom.attrs[attr]);\r\n          dom[m].attrs[attr] = vDom.attrs[attr];\r\n        }\r\n      });\r\n\r\n      Object.keys(vDom.props).forEach(prop => {\r\n        if (vDom.props[prop] !== null) {\r\n          dom[prop] = vDom.props[prop];\r\n          dom[m].props[prop] = vDom.props[prop];\r\n        }\r\n      });\r\n\r\n      vDom.children.forEach(child => {\r\n        let childDom = createDom(child, parent);\r\n        dom.appendChild(childDom);\r\n\r\n        if (parent && parent[m].mounted && childDom[m] && childDom[m].id) {\r\n          emitMount(parent[m].children[childDom[m].id]);\r\n        }\r\n      });\r\n\r\n      if (vDom.ref) vDom.ref(dom);\r\n      if (vDom.key) dom[m].key = vDom.key;\r\n\r\n      return dom;\r\n  }\r\n}\r\n","export default function assign() {\r\n  for (let i = 1; i < arguments.length; i++) {\r\n    Object.keys(arguments[i]).forEach(key => {\r\n      arguments[0][key] = arguments[i][key];\r\n    });\r\n  }\r\n  return arguments[0];\r\n}\r\n","import { INTERNAL_VAR_NAME as m } from '../constants';\r\nimport render from './render';\r\nimport assign from '../utils/assign';\r\n\r\nexport default function setProps(component, props) {\r\n  let newProps = component[m].defaultProps\r\n    ? assign({}, component[m].defaultProps, props)\r\n    : props;\r\n\r\n  if (component[m].shouldUpdateProps(component[m].props, newProps)) {\r\n    component[m].props = newProps;\r\n    render(component);\r\n  }\r\n}\r\n","import { INTERNAL_VAR_NAME as m } from '../constants';\r\nimport emitHook from './emitHook';\r\n\r\nexport default function removeComponent(component) {\r\n  emitHook(component, 'willRemove');\r\n\r\n  let parent = component[m].parent;\r\n  let id = component[m].id;\r\n\r\n  Object.keys(component[m].children).forEach(child => {\r\n    removeComponent(child);\r\n  });\r\n\r\n  component[m].subscriptions.forEach(item => {\r\n    let store = item.store;\r\n    item.fields.forEach(field => {\r\n      if (store[m].data.hasOwnProperty(field))\r\n        delete store[m].subscribers[field][id];\r\n    });\r\n  });\r\n\r\n  component[m].mounted = false;\r\n  delete component[m].dom;\r\n  if (parent) delete parent[m].children[id];\r\n\r\n  emitHook(component, 'didRemove');\r\n}\r\n","import { INTERNAL_VAR_NAME as m, ELEMENT_NODE, TEXT_NODE } from '../constants';\r\nimport addClass from '../vDom/addClass';\r\nimport sameTypeAndTag from './sameTypeAndTag';\r\nimport updateComponentDom from './updateComponentDom';\r\nimport createDom from './createDom';\r\nimport removeComponent from '../component/removeComponent';\r\nimport emitMount from '../component/emitMount';\r\n\r\nexport default function updateDom(dom, vDom, parent) {\r\n  if (vDom && vDom.component) {\r\n    updateComponentDom(dom, vDom, parent);\r\n    return;\r\n  }\r\n\r\n  if (!sameTypeAndTag(dom, vDom)) {\r\n    if (dom[m] && dom[m].id) {\r\n      removeComponent(parent[m].children[dom[m].id]);\r\n    }\r\n\r\n    let newDom = createDom(vDom, parent);\r\n    dom.parentNode.replaceChild(newDom, dom);\r\n\r\n    if (parent[m].dom === dom) {\r\n      parent[m].dom = newDom;\r\n    }\r\n\r\n    return;\r\n  }\r\n\r\n  addClass(vDom, parent[m].scope);\r\n\r\n  switch (dom.nodeType) {\r\n    case ELEMENT_NODE:\r\n      // Process attrs\r\n      let attrs = [];\r\n\r\n      if (dom[m].attrs) {\r\n        Object.keys(dom[m].attrs).forEach(attr => {\r\n          attrs.push(attr);\r\n        });\r\n      }\r\n\r\n      if (!dom[m].attrs) dom[m].attrs = {};\r\n\r\n      Object.keys(vDom.attrs).forEach(attr => {\r\n        if (vDom.attrs[attr] === null) {\r\n          dom.removeAttribute(attr);\r\n          delete dom[m].attrs[attr];\r\n        } else if (dom[m].attrs[attr] !== vDom.attrs[attr]) {\r\n          dom.setAttribute(attr, vDom.attrs[attr]);\r\n          dom[m].attrs[attr] = vDom.attrs[attr];\r\n        }\r\n\r\n        let index = attrs.indexOf(attr);\r\n        if (index > -1) {\r\n          attrs.splice(index, 1);\r\n        }\r\n      });\r\n\r\n      attrs.forEach(attr => {\r\n        dom.removeAttribute(attr);\r\n        delete dom[m].attrs[attr];\r\n      });\r\n\r\n      // Process props\r\n      let props = [];\r\n\r\n      if (dom[m].props) {\r\n        Object.keys(dom[m].props).forEach(prop => {\r\n          props.push(prop);\r\n        });\r\n      }\r\n\r\n      if (!dom[m].props) dom[m].props = {};\r\n\r\n      Object.keys(vDom.props).forEach(prop => {\r\n        if (vDom.props[prop] === null) {\r\n          dom[prop] = null;\r\n          delete dom[m].props[prop];\r\n        } else if (dom[m].props[prop] !== vDom.props[prop]) {\r\n          dom[prop] = vDom.props[prop];\r\n          dom[m].props[prop] = vDom.props[prop];\r\n        }\r\n\r\n        let index = props.indexOf(prop);\r\n        if (index > -1) {\r\n          props.splice(index, 1);\r\n        }\r\n      });\r\n\r\n      props.forEach(prop => {\r\n        dom[prop] = null;\r\n        delete dom[m].props[prop];\r\n      });\r\n\r\n      // Process child nodes\r\n      let keyed = vDom.children[0] && vDom.children[0].key;\r\n\r\n      if (keyed) {\r\n        let nodes = {};\r\n        let vNodes = {};\r\n\r\n        vDom.children.forEach(child => {\r\n          vNodes[child.key] = child;\r\n        });\r\n\r\n        while (dom.firstChild) {\r\n          nodes[dom.firstChild[m].key] = dom.removeChild(dom.firstChild);\r\n        }\r\n\r\n        vDom.children.forEach(child => {\r\n          if (nodes[child.key]) {\r\n            dom.appendChild(nodes[child.key]);\r\n            updateDom(nodes[child.key], child, parent);\r\n          } else dom.appendChild(createDom(child, parent));\r\n        });\r\n      } else {\r\n        vDom.children.forEach((child, index) => {\r\n          if (!dom.childNodes[index]) {\r\n            let childDom = createDom(child, parent);\r\n            dom.appendChild(childDom);\r\n\r\n            if (parent[m].mounted && childDom[m] && childDom[m].id) {\r\n              emitMount(parent[m].children[childDom[m].id]);\r\n            }\r\n          } else {\r\n            updateDom(dom.childNodes[index], child, parent);\r\n          }\r\n        });\r\n\r\n        while (dom.childNodes[vDom.children.length]) {\r\n          let child = dom.childNodes[vDom.children.length];\r\n          dom.removeChild(child);\r\n        }\r\n      }\r\n\r\n      // Run ref function\r\n      if (vDom.ref) vDom.ref(dom);\r\n\r\n      // Store the key\r\n      if (vDom.key) dom[m].key = vDom.key;\r\n      else if (dom[m].key) delete dom[m].key;\r\n\r\n      break;\r\n\r\n    case TEXT_NODE:\r\n      if (dom.nodeValue !== vDom) {\r\n        dom.nodeValue = vDom;\r\n      }\r\n      break;\r\n  }\r\n}\r\n","import { INTERNAL_VAR_NAME as m } from '../constants';\r\nimport createComponent from '../component/createComponent';\r\nimport setProps from '../component/setProps';\r\nimport render from '../component/render';\r\nimport emitMount from '../component/emitMount';\r\nimport removeComponent from '../component/removeComponent';\r\n\r\nexport default function updateComponentDom(dom, vDom, parent) {\r\n  if (dom[m] && dom[m].id) {\r\n    let id = dom[m].id;\r\n    let component = parent[m].children[id];\r\n\r\n    if (component[m].name === vDom.component) {\r\n      component[m].dom = dom;\r\n      setProps(component, vDom.props);\r\n\r\n      if (vDom.ref) vDom.ref(component);\r\n\r\n      if (vDom.key) component[m].dom[m].key = vDom.key;\r\n      else if (component[m].dom[m].key) delete component[m].dom[m].key;\r\n\r\n      return;\r\n    } else removeComponent(parent[m].children[id]);\r\n  }\r\n\r\n  let component = createComponent(vDom.component, vDom.props, parent);\r\n  component[m].dom = dom;\r\n\r\n  if (vDom.ref) vDom.ref(component);\r\n\r\n  render(component);\r\n\r\n  if (vDom.key) component[m].dom[m].key = vDom.key;\r\n  else if (component[m].dom[m].key) delete component[m].dom[m].key;\r\n\r\n  if (parent[m].mounted) emitMount(component);\r\n}\r\n","import { COMMENT_NODE, ELEMENT_NODE, TEXT_NODE } from '../constants';\r\n\r\nexport default function sameTypeAndTag(dom, vDom) {\r\n  if (!vDom) return dom.nodeType === COMMENT_NODE;\r\n\r\n  if (typeof vDom === 'object' && dom.nodeType === ELEMENT_NODE) {\r\n    return vDom.tag.toUpperCase() === dom.tagName;\r\n  } else if (typeof vDom === 'string' && dom.nodeType === TEXT_NODE) {\r\n    return true;\r\n  }\r\n\r\n  return false;\r\n}\r\n","export default class ModesteError extends Error {\r\n  constructor(...args) {\r\n    super(...args);\r\n    this.name = 'MODESTE Error';\r\n    this.message = '[MODESTE ERROR] ' + this.message;\r\n    Error.captureStackTrace(this, modesteError);\r\n  }\r\n}\r\n","import { INTERNAL_VAR_NAME as m } from '../constants';\r\nimport emitHook from './emitHook';\r\nimport e from '../vDom/createElementNode';\r\nimport c from '../vDom/createComponentNode';\r\nimport createDom from '../dom/createDom';\r\nimport updateDom from '../dom/updateDom';\r\nimport ModesteError from '../utils/ModesteError';\r\n\r\nexport default function render(component) {\r\n  if (component[m].render) {\r\n    if (!component[m].mounted) emitHook(component, 'willMount');\r\n    else emitHook(component, 'willUpdate');\r\n\r\n    let vDom = component[m].render(e, c);\r\n\r\n    if (typeof vDom !== 'object' || vDom.component || !vDom.tag) {\r\n      throw new ModesteError(\r\n        `${component[m].name}: Component root must be a tag`\r\n      );\r\n    }\r\n\r\n    if (!component[m].dom) {\r\n      component[m].dom = createDom(vDom, component);\r\n    } else {\r\n      updateDom(component[m].dom, vDom, component);\r\n    }\r\n\r\n    component[m].dom[m].id = component[m].id;\r\n\r\n    if (component[m].mounted) emitHook(component, 'didUpdate');\r\n  } else emitHook(component, 'didUpdate');\r\n}\r\n","const resolvedPromise = Promise.resolve();\r\n\r\nexport default function promiseCall(func, callback) {\r\n  return resolvedPromise.then(function() {\r\n    func();\r\n    if (callback) callback();\r\n  });\r\n}\r\n","import immediateCall from './immediateCall';\r\nimport promiseCall from './promiseCall';\r\nimport timeoutCall from './timeoutCall';\r\n\r\nlet asyncCall;\r\n\r\nif (window.setImmediate) asyncCall = immediateCall;\r\nelse if (window.Promise) asyncCall = promiseCall;\r\nelse asyncCall = timeoutCall;\r\n\r\nexport default asyncCall;\r\n","export default function immediateCall(func, callback) {\r\n  window.setImmediate(function() {\r\n    func();\r\n    if (callback) callback();\r\n  });\r\n}\r\n","export default function timeoutCall(func, callback) {\r\n  setTimeout(function() {\r\n    func();\r\n    if (callback) callback();\r\n  }, 0);\r\n}\r\n","import { INTERNAL_VAR_NAME as m } from '../constants';\r\nimport render from './render';\r\nimport asyncCall from '../utils/asyncCall';\r\n\r\nlet renderQueue = [];\r\nlet rendered = {};\r\n\r\nfunction flushRender() {\r\n  renderQueue.forEach(component => {\r\n    if (!rendered[component[m].id]) {\r\n      render(component);\r\n      rendered[component[m].id] = true;\r\n    }\r\n  });\r\n\r\n  renderQueue = [];\r\n  rendered = {};\r\n}\r\n\r\nexport default function asyncRender(component, callback) {\r\n  renderQueue.push(component);\r\n  if (renderQueue.length === 1) asyncCall(flushRender, callback);\r\n}\r\n","import { INTERNAL_VAR_NAME as m } from '../constants';\r\nimport shouldUpdateData from './shouldUpdateData';\r\nimport shouldUpdateProps from './shouldUpdateProps';\r\nimport registerHooks from './registerHooks';\r\nimport emitHook from './emitHook';\r\nimport registerComponent from './registerComponent';\r\nimport render from './render';\r\nimport asyncRender from './asyncRender';\r\nimport generateId from '../utils/generateId';\r\nimport assign from '../utils/assign';\r\n\r\nexport default class Component {\r\n  constructor(opts, parent) {\r\n    let id = generateId();\r\n\r\n    this[m] = {};\r\n    registerHooks(this, opts.manifest);\r\n    emitHook(this, 'willCreate');\r\n\r\n    this[m].id = id;\r\n    if (parent) parent[m].children[id] = this;\r\n\r\n    this[m].name = opts.name;\r\n    this[m].factories = opts.manifest.factories ? opts.manifest.factories : {};\r\n    this[m].parent = parent;\r\n    this[m].app = parent ? parent[m].app : this;\r\n    this[m].scope = opts.scope;\r\n    this[m].children = {};\r\n    this[m].props = opts.props ? opts.props : {};\r\n    this[m].defaultProps = opts.manifest.defaultProps;\r\n\r\n    if (this[m].defaultProps)\r\n      this.props = assign({}, this[m].defaultProps, this[m].props);\r\n\r\n    this[m].subscribers = {};\r\n\r\n    this[m].subscriptions = opts.manifest.subscriptions\r\n      ? opts.manifest.subscriptions\r\n      : [];\r\n\r\n    this[m].render = opts.manifest.render\r\n      ? opts.manifest.render.bind(this)\r\n      : null;\r\n\r\n    this[m].shouldUpdateData = shouldUpdateData;\r\n    this[m].shouldUpdateProps = shouldUpdateProps;\r\n\r\n    this[m].subscriptions.forEach(item => {\r\n      let store = item.store;\r\n      item.fields.forEach(field => {\r\n        if (store[m].data.hasOwnProperty(field))\r\n          store[m].subscribers[field][id] = this;\r\n      });\r\n    });\r\n\r\n    if (opts.manifest.props) {\r\n      opts.manifest.props.forEach(prop => {\r\n        Object.defineProperty(this, prop, {\r\n          enumerable: true,\r\n          get: function() {\r\n            return this[m].props[prop] !== undefined &&\r\n              this[m].props[prop] !== null\r\n              ? this[m].props[prop]\r\n              : this[m].defaultProps[prop];\r\n          }\r\n        });\r\n      });\r\n    }\r\n\r\n    if (opts.manifest.data) {\r\n      this[m].data = opts.manifest.data.bind(this)();\r\n\r\n      Object.keys(this[m].data).forEach(prop => {\r\n        this[m].subscribers[prop] = {};\r\n\r\n        Object.defineProperty(this, prop, {\r\n          enumerable: true,\r\n          get: function() {\r\n            return this[m].data[prop];\r\n          },\r\n          set: function(value) {\r\n            if (this[m].shouldUpdateData(this[m].data[prop], value)) {\r\n              this[m].data[prop] = value;\r\n              asyncRender(this);\r\n\r\n              let subscribers = this[m].subscribers[prop];\r\n              Object.keys(subscribers).forEach(key =>\r\n                asyncRender(subscribers[key])\r\n              );\r\n            }\r\n          }\r\n        });\r\n      });\r\n    }\r\n\r\n    if (opts.manifest.components) {\r\n      Object.keys(opts.manifest.components).forEach(name => {\r\n        registerComponent(this, name, opts.manifest.components[name]);\r\n      });\r\n    }\r\n\r\n    if (opts.manifest.methods) {\r\n      Object.keys(opts.manifest.methods).forEach(method => {\r\n        this[method] = opts.manifest.methods[method].bind(this);\r\n      });\r\n    }\r\n\r\n    emitHook(this, 'didCreate');\r\n  }\r\n\r\n  get $data() {\r\n    return assign({}, this[m].data);\r\n  }\r\n\r\n  set $data(data) {\r\n    Object.keys(data).forEach(key => {\r\n      if (this[m].data !== undefined) this[key] = data[key];\r\n    });\r\n  }\r\n\r\n  get $props() {\r\n    return assign({}, this[m].props);\r\n  }\r\n\r\n  get $app() {\r\n    return this[m].app;\r\n  }\r\n\r\n  get $dom() {\r\n    return this[m].dom;\r\n  }\r\n\r\n  $render() {\r\n    render(this);\r\n  }\r\n}\r\n","import { INTERNAL_VAR_NAME as m } from '../constants';\r\nimport Component from './Component';\r\nimport generateScope from './generateScope';\r\nimport addStyles from '../dom/addStyles';\r\n\r\nexport default function registerComponent(parent, name, manifest) {\r\n  if (!parent[m].factories[name]) {\r\n    let scope = manifest.scope !== false ? generateScope(name) : false;\r\n\r\n    if (manifest.style) addStyles(manifest.style(), scope);\r\n\r\n    parent[m].factories[name] = (props, parent) =>\r\n      new Component(\r\n        {\r\n          name,\r\n          manifest,\r\n          scope,\r\n          props\r\n        },\r\n        parent\r\n      );\r\n  }\r\n}\r\n","import { ROOT_NAME, INTERNAL_VAR_NAME as m } from './constants';\r\nimport Component from './component/Component';\r\nimport generateScope from './component/generateScope';\r\nimport addStyles from './dom/addStyles';\r\nimport emitMount from './component/emitMount';\r\nimport setProps from './component/setProps';\r\n\r\nlet scope = generateScope(ROOT_NAME);\r\n\r\nexport default class Modeste extends Component {\r\n  constructor(manifest, props) {\r\n    super({\r\n      name: ROOT_NAME,\r\n      manifest,\r\n      props,\r\n      scope\r\n    });\r\n\r\n    this[m].parent = null;\r\n    this[m].isApp = true;\r\n\r\n    if (manifest.style) addStyles(manifest.style(), scope);\r\n    this[m].wrap = manifest.selector\r\n      ? document.querySelector(manifest.selector)\r\n      : null;\r\n\r\n    this.$render();\r\n  }\r\n\r\n  get $wrap() {\r\n    return this[m].wrap;\r\n  }\r\n\r\n  set $props(props) {\r\n    setProps(this, props);\r\n  }\r\n\r\n  $render() {\r\n    super.$render();\r\n\r\n    if (!this[m].render) return;\r\n\r\n    if (!this[m].mounted) {\r\n      if (!this[m].wrap) return emitMount(this);\r\n\r\n      while (this[m].wrap.firstChild)\r\n        this[m].wrap.removeChild(this[m].wrap.firstChild);\r\n\r\n      this[m].wrap.appendChild(this[m].dom);\r\n      emitMount(this);\r\n    }\r\n  }\r\n}\r\n"],"names":["ROOT_NAME","INTERNAL_VAR_NAME","COMMENT_NODE","window","Node","ELEMENT_NODE","TEXT_NODE","shouldUpdateData","oldValue","newValue","shouldUpdateProps","oldProps","newProps","a","b","aKeys","Object","keys","bKeys","length","i","key","indexOf","shallowCompare","HOOKS","emitHook","component","hook","m","ID_RND_LENGTH","idCounter","generateId","middleware","random","Math","toString","substr","id","repeat","generateScope","name","addStyles","style","scope","styleElement","document","createElement","repl","textContent","replace","head","appendChild","createElementNode","tag","opts","children","props","attrs","node","Array","forEach","str","kebab","toLowerCase","createComponentNode","addClass","vDom","className","class","trim","createComponent","parent","factories","app","emitMount","mounted","createDom","createComment","createTextNode","ref","dom","attr","setAttribute","prop","childDom","child","assign","arguments","setProps","defaultProps","removeComponent","subscriptions","store","item","fields","data","hasOwnProperty","field","subscribers","updateDom","nodeType","toUpperCase","tagName","newDom","parentNode","replaceChild","push","removeAttribute","index","splice","nodes","vNodes","firstChild","removeChild","childNodes","nodeValue","ModesteError","args","message","_this","captureStackTrace","modesteError","Error","render","e","c","resolvedPromise","Promise","resolve","setImmediate","func","callback","then","rendered","flushRender","asyncRender","renderQueue","asyncCall","Component","manifest","this","bind","defineProperty","undefined","value","components","methods","method","_this2","isApp","wrap","selector","querySelector","$render"],"mappings":"oCAAO,IAAMA,EAAY,cACZC,EAAoB,oBAEpBC,EAAeC,OAAOC,KAAKF,aAC3BG,EAAeF,OAAOC,KAAKC,aAC3BC,EAAYH,OAAOC,KAAKE,UCLtB,SAASC,EAAiBC,EAAUC,UAC1CD,IAAaC,WCCEC,EAAkBC,EAAUC,mBCFbC,EAAGC,OACpCC,EAAQC,OAAOC,KAAKJ,GACpBK,EAAQF,OAAOC,KAAKH,MAEpBC,EAAMI,SAAWD,EAAMC,OAAQ,OAAO,MAErC,IAAIC,EAAI,EAAGA,EAAIL,EAAMI,OAAQC,IAAK,KACjCC,EAAMN,EAAMK,MACJF,EAAMI,QAAQD,GAEd,EAAG,OAAO,KAClBR,EAAEQ,KAASP,EAAEO,GAAM,OAAO,SAGzB,EDXCE,CAAeZ,EAAUC,OED7BY,EAAQ,CACZ,aACA,YACA,YACA,WACA,aACA,YACA,aACA,YACA,mBACA,8BCVsBC,EAASC,EAAWC,GACtCD,EAAUE,GAAGD,IAAOD,EAAUE,GAAGD,KCHvC,IAAME,EAAgB,EAClBC,EAAY,EAEhB,SAAwBC,EAAWC,OAC7BC,EAASC,KAAKD,SACfE,SAAS,IACTC,OAAO,EAAGP,GAETQ,EACFJ,EACA,IAAIK,OAAOT,EAAgBI,EAAOd,SACjCW,KAAaK,SAAS,WAErBH,EAAmBA,EAAWK,GAC3BA,WCZeE,EAAcC,UAC7BT,EAAW,mBAASS,MAAQH,aCHbI,EAAUC,EAAOC,MAClCD,OAEDE,EAAeC,SAASC,cAAc,YAEtCH,EAAO,KAELI,EAAO,IAAMJ,EAAQ,OAEZK,YAAcN,EAAMO,QAHrB,qBAGoCF,UAEnCC,YAAcN,kBAGpBQ,KAAKC,YAAYP,GAEnBA,YCdeQ,EAAkBC,EAAKC,EAAMC,OAC/CC,EAAQ,GACRC,EAAQ,GAERC,EAAO,CAAEL,MAAKG,QAAOC,gBAErBH,IACEA,aAAgBK,QACPL,SAEJrC,KAAKqC,GAAMM,QAAQ,mBAChBvC,EAAI,QACL,OCdqBwC,EDeNxC,EAAIe,OAAO,GCdnC0B,EAAQD,EAAIZ,QAAQ,WAAY,OAAOc,cAC1B,MAAbD,EAAM,GAAmBA,EAAM1B,OAAO,GACnC0B,IDYuCR,EAAKjC,aAEtC,MACEA,EAAIe,OAAO,IAAMkB,EAAKjC,mBAGrBA,GAAOiC,EAAKjC,OCrBMwC,EAC9BC,OD0BCP,SAAWA,GAAsB,GAE/BG,WE7BeM,EAAoBtC,EAAW4B,OACjDE,EAAQ,GACRE,EAAO,CAAEhC,YAAW8B,gBAEpBF,UACKrC,KAAKqC,GAAMM,QAAQ,mBAChBvC,EAAI,QACL,MACEA,EAAIe,OAAO,IAAMkB,EAAKjC,mBAGrBA,GAAOiC,EAAKjC,MAKnBqC,WChBeO,EAASC,EAAMC,GAChCD,GAAwB,iBAATA,IAAqBA,EAAKxC,WAAcyC,IACvDD,EAAKV,MAAMW,YAAWD,EAAKV,MAAMW,UAAY,IAC7CD,EAAKT,MAAMW,QAAOF,EAAKT,MAAMW,MAAQ,MAErCZ,MAAMW,WAAeD,EAAKV,MAAMW,cAAaA,GAAYE,SACzDZ,MAAMW,OAAWF,EAAKT,MAAMW,UAASD,GAAYE,iBCJhCC,EAAgB9B,EAAMgB,EAAOe,UAC/CA,EAAO3C,GAAG4C,UAAUhC,GACf+B,EAAO3C,GAAG4C,UAAUhC,GAAMgB,EAAOe,GAGnCA,EAAO3C,GAAG6C,IAAI7C,GAAG4C,UAAUhC,GAAMgB,EAAOe,YCJzBG,EAAUhD,OAC5B6B,EAAW7B,EAAUE,GAAG2B,gBACrBtC,KAAKsC,GAAUK,QAAQ,mBAAOc,EAAUnB,EAASlC,QAE9CO,GAAG+C,SAAU,IACdjD,EAAW,yhCCFEkD,EAAUV,EAAMK,MAClCA,GAAQN,EAASC,EAAMK,EAAO3C,GAAGe,QAEhCuB,SACIrB,SAASgC,cAAc,oBAGjBX,gBAAAA,QACR,gBACIrB,SAASiC,eAAeZ,OAE5B,YACCA,EAAKxC,UAAW,KACdA,EAAY4C,EAAgBJ,EAAKxC,UAAWwC,EAAKV,MAAOe,UAExDL,EAAKa,KAAKb,EAAKa,IAAIrD,KAEhBA,GAEHwC,EAAK7C,MAAKK,EAAUE,GAAGoD,IAAIpD,GAAGP,IAAM6C,EAAK7C,KACtCK,EAAUE,GAAGoD,QAGlBA,EAAMnC,SAASC,cAAcoB,EAAKb,cAElCzB,GAAK,KACLA,GAAG6B,MAAQ,KACX7B,GAAG4B,MAAQ,UAERvC,KAAKiD,EAAKT,OAAOG,QAAQ,YACL,OAArBM,EAAKT,MAAMwB,OACTC,aAAaD,EAAMf,EAAKT,MAAMwB,MAC9BrD,GAAG6B,MAAMwB,GAAQf,EAAKT,MAAMwB,aAI7BhE,KAAKiD,EAAKV,OAAOI,QAAQ,YACL,OAArBM,EAAKV,MAAM2B,OACTA,GAAQjB,EAAKV,MAAM2B,KACnBvD,GAAG4B,MAAM2B,GAAQjB,EAAKV,MAAM2B,QAI/B5B,SAASK,QAAQ,gBAChBwB,EAAWR,EAAUS,EAAOd,KAC5BpB,YAAYiC,GAEZb,GAAUA,EAAO3C,GAAG+C,SAAWS,EAASxD,IAAMwD,EAASxD,GAAGS,MAClDkC,EAAO3C,GAAG2B,SAAS6B,EAASxD,GAAGS,OAIzC6B,EAAKa,KAAKb,EAAKa,IAAIC,GACnBd,EAAK7C,MAAK2D,EAAIpD,GAAGP,IAAM6C,EAAK7C,KAEzB2D,GC7DE,SAASM,mCACblE,UACAH,KAAKsE,EAAUnE,IAAIwC,QAAQ,cACtB,GAAGvC,GAAOkE,EAAUnE,GAAGC,MAF5BD,EAAI,EAAGA,EAAImE,UAAUpE,OAAQC,MAA7BA,UAKFmE,UAAU,YCFKC,EAAS9D,EAAW8B,OACtC5C,EAAWc,EAAUE,GAAG6D,aACxBH,EAAO,GAAI5D,EAAUE,GAAG6D,aAAcjC,GACtCA,EAEA9B,EAAUE,GAAGlB,kBAAkBgB,EAAUE,GAAG4B,MAAO5C,OAC3CgB,GAAG4B,MAAQ5C,IACdc,aCRagE,EAAgBhE,KAC7BA,EAAW,kBAEhB6C,EAAS7C,EAAUE,GAAG2C,OACtBlC,EAAKX,EAAUE,GAAGS,UAEfpB,KAAKS,EAAUE,GAAG2B,UAAUK,QAAQ,cACzByB,OAGRzD,GAAG+D,cAAc/B,QAAQ,gBAC7BgC,EAAQC,EAAKD,QACZE,OAAOlC,QAAQ,YACdgC,EAAMhE,GAAGmE,KAAKC,eAAeC,WACxBL,EAAMhE,GAAGsE,YAAYD,GAAO5D,SAI/BT,GAAG+C,SAAU,SAChBjD,EAAUE,GAAGoD,IAChBT,UAAeA,EAAO3C,GAAG2B,SAASlB,KAE7BX,EAAW,sBCjBEyE,EAAUnB,EAAKd,EAAMK,MACvCL,GAAQA,EAAKxC,oBCFwBsD,EAAKd,EAAMK,MAChDS,EAAIpD,IAAMoD,EAAIpD,GAAGS,GAAI,KACnBA,EAAK2C,EAAIpD,GAAGS,GACZX,EAAY6C,EAAO3C,GAAG2B,SAASlB,MAE/BX,EAAUE,GAAGY,OAAS0B,EAAKxC,mBACnBE,GAAGoD,IAAMA,IACVtD,EAAWwC,EAAKV,OAErBU,EAAKa,KAAKb,EAAKa,IAAIrD,GAEnBwC,EAAK7C,IAAKK,EAAUE,GAAGoD,IAAIpD,GAAGP,IAAM6C,EAAK7C,IACpCK,EAAUE,GAAGoD,IAAIpD,GAAGP,YAAYK,EAAUE,GAAGoD,IAAIpD,GAAGP,IAGxDqE,EAAgBnB,EAAO3C,GAAG2B,SAASlB,QAGxCX,EAAY4C,EAAgBJ,EAAKxC,UAAWwC,EAAKV,MAAOe,KAClD3C,GAAGoD,IAAMA,EAEfd,EAAKa,KAAKb,EAAKa,IAAIrD,KAEhBA,GAEHwC,EAAK7C,IAAKK,EAAUE,GAAGoD,IAAIpD,GAAGP,IAAM6C,EAAK7C,IACpCK,EAAUE,GAAGoD,IAAIpD,GAAGP,YAAYK,EAAUE,GAAGoD,IAAIpD,GAAGP,IAEzDkD,EAAO3C,GAAG+C,SAASD,EAAUhD,IDzBZsD,EAAKd,EAAMK,WERKS,EFYjBA,KEZsBd,EFYjBA,GETL,qBAATA,gBAAAA,KAAqBc,EAAIoB,WAAa/F,EACxC6D,EAAKb,IAAIgD,gBAAkBrB,EAAIsB,QACb,iBAATpC,GAAqBc,EAAIoB,WAAa9F,EAJtC0E,EAAIoB,WAAalG,GFWH,CAC1B8E,EAAIpD,IAAMoD,EAAIpD,GAAGS,MACHkC,EAAO3C,GAAG2B,SAASyB,EAAIpD,GAAGS,SAGxCkE,EAAS3B,EAAUV,EAAMK,YACzBiC,WAAWC,aAAaF,EAAQvB,QAEhCT,EAAO3C,GAAGoD,MAAQA,MACbpD,GAAGoD,IAAMuB,IErBP,IAAwBvB,EAAKd,WF2BjCA,EAAMK,EAAO3C,GAAGe,OAEjBqC,EAAIoB,eACL/F,MAECoD,EAAQ,GAERuB,EAAIpD,GAAG6B,cACFxC,KAAK+D,EAAIpD,GAAG6B,OAAOG,QAAQ,cAC1B8C,KAAKzB,KAIVD,EAAIpD,GAAG6B,QAAOuB,EAAIpD,GAAG6B,MAAQ,WAE3BxC,KAAKiD,EAAKT,OAAOG,QAAQ,YACL,OAArBM,EAAKT,MAAMwB,MACT0B,gBAAgB1B,UACbD,EAAIpD,GAAG6B,MAAMwB,IACXD,EAAIpD,GAAG6B,MAAMwB,KAAUf,EAAKT,MAAMwB,OACvCC,aAAaD,EAAMf,EAAKT,MAAMwB,MAC9BrD,GAAG6B,MAAMwB,GAAQf,EAAKT,MAAMwB,QAG9B2B,EAAQnD,EAAMnC,QAAQ2D,IACb,EAAT2B,KACIC,OAAOD,EAAO,OAIlBhD,QAAQ,cACR+C,gBAAgB1B,UACbD,EAAIpD,GAAG6B,MAAMwB,SAIlBzB,EAAQ,MAERwB,EAAIpD,GAAG4B,cACFvC,KAAK+D,EAAIpD,GAAG4B,OAAOI,QAAQ,cAC1B8C,KAAKvB,KAIVH,EAAIpD,GAAG4B,QAAOwB,EAAIpD,GAAG4B,MAAQ,WAE3BvC,KAAKiD,EAAKV,OAAOI,QAAQ,YACL,OAArBM,EAAKV,MAAM2B,MACTA,GAAQ,YACLH,EAAIpD,GAAG4B,MAAM2B,IACXH,EAAIpD,GAAG4B,MAAM2B,KAAUjB,EAAKV,MAAM2B,OACvCA,GAAQjB,EAAKV,MAAM2B,KACnBvD,GAAG4B,MAAM2B,GAAQjB,EAAKV,MAAM2B,QAG9ByB,EAAQpD,EAAMlC,QAAQ6D,IACb,EAATyB,KACIC,OAAOD,EAAO,OAIlBhD,QAAQ,cACRuB,GAAQ,YACLH,EAAIpD,GAAG4B,MAAM2B,KAIVjB,EAAKX,SAAS,IAAMW,EAAKX,SAAS,GAAGlC,IAEtC,KACLyF,EAAQ,GACRC,EAAS,SAERxD,SAASK,QAAQ,cACbyB,EAAMhE,KAAOgE,IAGfL,EAAIgC,cACHhC,EAAIgC,WAAWpF,GAAGP,KAAO2D,EAAIiC,YAAYjC,EAAIgC,cAGhDzD,SAASK,QAAQ,YAChBkD,EAAMzB,EAAMhE,QACV8B,YAAY2D,EAAMzB,EAAMhE,QAClByF,EAAMzB,EAAMhE,KAAMgE,EAAOd,IAC9BS,EAAI7B,YAAYyB,EAAUS,EAAOd,iBAGrChB,SAASK,QAAQ,SAACyB,EAAOuB,MACvB5B,EAAIkC,WAAWN,KAQR5B,EAAIkC,WAAWN,GAAQvB,EAAOd,OARd,KACtBa,EAAWR,EAAUS,EAAOd,KAC5BpB,YAAYiC,GAEZb,EAAO3C,GAAG+C,SAAWS,EAASxD,IAAMwD,EAASxD,GAAGS,MACxCkC,EAAO3C,GAAG2B,SAAS6B,EAASxD,GAAGS,QAOxC2C,EAAIkC,WAAWhD,EAAKX,SAASpC,SAAS,KACvCkE,EAAQL,EAAIkC,WAAWhD,EAAKX,SAASpC,UACrC8F,YAAY5B,GAKhBnB,EAAKa,KAAKb,EAAKa,IAAIC,GAGnBd,EAAK7C,IAAK2D,EAAIpD,GAAGP,IAAM6C,EAAK7C,IACvB2D,EAAIpD,GAAGP,YAAY2D,EAAIpD,GAAGP,eAIhCf,EACC0E,EAAImC,YAAcjD,MAChBiD,UAAYjD,SGnJHkD,sEACJC,2HACJA,cACJ7E,KAAO,kBACP8E,QAAU,mBAAqBC,EAAKD,cACnCE,oBAAwBC,iCALQC,OCQ3B,SAASC,EAAOjG,MACzBA,EAAUE,GAAG+F,OAAQ,CAClBjG,EAAUE,GAAG+C,QACblD,EAASC,EAAW,cADED,EAASC,EAAW,iBAG3CwC,EAAOxC,EAAUE,GAAG+F,OAAOC,EAAGC,MAEd,qBAAT3D,gBAAAA,KAAqBA,EAAKxC,YAAcwC,EAAKb,UAChD,IAAI+D,EACL1F,EAAUE,GAAGY,uCAIfd,EAAUE,GAAGoD,MAGNtD,EAAUE,GAAGoD,IAAKd,EAAMxC,KAFxBE,GAAGoD,IAAMJ,EAAUV,EAAMxC,KAK3BE,GAAGoD,IAAIpD,GAAGS,GAAKX,EAAUE,GAAGS,GAElCX,EAAUE,GAAG+C,SAASlD,EAASC,EAAW,kBACzCD,EAASC,EAAW,aC9B7B,IAAMoG,EAAkBC,QAAQC,gBCM5B7H,OAAO8H,aCNI,SAAuBC,EAAMC,UACnCF,aAAa,eAEdE,GAAUA,ODIThI,OAAO4H,QDLhB,SAAoCG,EAAMC,UACjCL,EAAgBM,KAAK,eAEtBD,GAAUA,gBGLkBD,EAAMC,cAC7B,eAELA,GAAUA,KACb,SCCDE,EAAW,GAEf,SAASC,MACK1E,QAAQ,YACbyE,EAAS3G,EAAUE,GAAGS,QAClBX,KACEA,EAAUE,GAAGS,KAAM,OAIlB,KACH,GAGb,SAAwBkG,EAAY7G,EAAWyG,KACjCzB,KAAKhF,GACU,IAAvB8G,EAAYrH,QAAcsH,EAAUH,EAAaH,OCVlCO,wBACPpF,EAAMiB,4BzBGkB7C,EAAWiH,EyBFzCtG,EAAKN,SAEJH,GAAK,GzBAwBF,EyBCpBkH,KzBD+BD,EyBCzBrF,EAAKqF,WzBArB/E,QAAQ,YACR+E,EAAShH,KAAOD,EAAUE,GAAGD,GAAQgH,EAAShH,GAAMkH,KAAKnH,QyBApDkH,KAAM,mBAEVhH,GAAGS,GAAKA,EACTkC,IAAQA,EAAO3C,GAAG2B,SAASlB,GAAMuG,WAEhChH,GAAGY,KAAOc,EAAKd,UACfZ,GAAG4C,UAAYlB,EAAKqF,SAASnE,UAAYlB,EAAKqF,SAASnE,UAAY,QACnE5C,GAAG2C,OAASA,OACZ3C,GAAG6C,IAAMF,EAASA,EAAO3C,GAAG6C,IAAMmE,UAClChH,GAAGe,MAAQW,EAAKX,WAChBf,GAAG2B,SAAW,QACd3B,GAAG4B,MAAQF,EAAKE,MAAQF,EAAKE,MAAQ,QACrC5B,GAAG6D,aAAenC,EAAKqF,SAASlD,aAEjCmD,KAAKhH,GAAG6D,eACVmD,KAAKpF,MAAQ8B,EAAO,GAAIsD,KAAKhH,GAAG6D,aAAcmD,KAAKhH,GAAG4B,aAEnD5B,GAAGsE,YAAc,QAEjBtE,GAAG+D,cAAgBrC,EAAKqF,SAAShD,cAClCrC,EAAKqF,SAAShD,cACd,QAEC/D,GAAG+F,OAASrE,EAAKqF,SAAShB,OAC3BrE,EAAKqF,SAAShB,OAAOkB,KAAKD,MAC1B,UAEChH,GAAGrB,iBAAmBA,OACtBqB,GAAGlB,kBAAoBA,OAEvBkB,GAAG+D,cAAc/B,QAAQ,gBACxBgC,EAAQC,EAAKD,QACZE,OAAOlC,QAAQ,YACdgC,EAAMhE,GAAGmE,KAAKC,eAAeC,KAC/BL,EAAMhE,GAAGsE,YAAYD,GAAO5D,GAAMkF,OAIpCjE,EAAKqF,SAASnF,SACXmF,SAASnF,MAAMI,QAAQ,mBACnBkF,eAAevB,EAAMpC,EAAM,aACpB,MACP,uBAC4B4D,IAAxBH,KAAKhH,GAAG4B,MAAM2B,IACK,OAAxByD,KAAKhH,GAAG4B,MAAM2B,GACZyD,KAAKhH,GAAG4B,MAAM2B,GACdyD,KAAKhH,GAAG6D,aAAaN,QAM7B7B,EAAKqF,SAAS5C,YACXnE,GAAGmE,KAAOzC,EAAKqF,SAAS5C,KAAK8C,KAAKD,KAAxBtF,UAERrC,KAAK2H,KAAKhH,GAAGmE,MAAMnC,QAAQ,cAC3BhC,GAAGsE,YAAYf,GAAQ,UAErB2D,eAAevB,EAAMpC,EAAM,aACpB,MACP,kBACIyD,KAAKhH,GAAGmE,KAAKZ,QAEjB,SAAS6D,MACRJ,KAAKhH,GAAGrB,iBAAiBqI,KAAKhH,GAAGmE,KAAKZ,GAAO6D,GAAQ,MAClDpH,GAAGmE,KAAKZ,GAAQ6D,IACTJ,UAER1C,EAAc0C,KAAKhH,GAAGsE,YAAYf,UAC/BlE,KAAKiF,GAAatC,QAAQ,mBAC/B2E,EAAYrC,EAAY7E,aAQhCiC,EAAKqF,SAASM,mBACThI,KAAKqC,EAAKqF,SAASM,YAAYrF,QAAQ,sBC3FVW,EAAQ/B,EAAMmG,OACjDpE,EAAO3C,GAAG4C,UAAUhC,GAAO,KAC1BG,GAA2B,IAAnBgG,EAAShG,OAAkBJ,EAAcC,GAEjDmG,EAASjG,OAAOD,EAAUkG,EAASjG,QAASC,KAEzCf,GAAG4C,UAAUhC,GAAQ,SAACgB,EAAOe,UAClC,IAAImE,EACF,oCAMAnE,MD8EkBgD,EAAM/E,EAAMc,EAAKqF,SAASM,WAAWzG,MAIvDc,EAAKqF,SAASO,gBACTjI,KAAKqC,EAAKqF,SAASO,SAAStF,QAAQ,cACpCuF,GAAU7F,EAAKqF,SAASO,QAAQC,GAAQN,KAAKtB,OAI7CqB,KAAM,2DA0BRA,2CAtBAtD,EAAO,GAAIsD,KAAKhH,GAAGmE,oBAGlBA,qBACD9E,KAAK8E,GAAMnC,QAAQ,iBACHmF,IAAjBK,EAAKxH,GAAGmE,OAAoBqD,EAAK/H,GAAO0E,EAAK1E,4CAK5CiE,EAAO,GAAIsD,KAAKhH,GAAG4B,2CAInBoF,KAAKhH,GAAG6C,wCAIRmE,KAAKhH,GAAGoD,aE1HfrC,EAAQJ,EAAcvC,iCAGZ2I,EAAUnF,4EACd,MACExD,yCAMH4B,GAAG2C,OAAS,OACZ3C,GAAGyH,OAAQ,EAEZV,EAASjG,OAAOD,EAAUkG,EAASjG,QAASC,KAC3Cf,GAAG0H,KAAOX,EAASY,SACpB1G,SAAS2G,cAAcb,EAASY,UAChC,OAECE,uBAjB4Bf,0XA+B5BE,KAAKhH,GAAG+F,SAERiB,KAAKhH,GAAG+C,QAAS,KACfiE,KAAKhH,GAAG0H,KAAM,OAAO5E,EAAUkE,WAE7BA,KAAKhH,GAAG0H,KAAKtC,iBACbpF,GAAG0H,KAAKrC,YAAY2B,KAAKhH,GAAG0H,KAAKtC,YAExC4B,KAAKhH,GAAG0H,KAAKnG,YAAYyF,KAAKhH,GAAGoD,OACvB4D,4CAnBLA,KAAKhH,GAAG0H,kCAGN9F,KACAoF,KAAMpF"}