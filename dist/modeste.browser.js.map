{"version":3,"file":"modeste.browser.js","sources":["../src/constants.js","../src/utils/strictEqual.js","../src/component/shouldUpdateData.js","../src/component/shouldUpdateProps.js","../src/utils/shallowCompare.js","../src/component/registerHooks.js","../src/component/emitHook.js","../src/utils/generateId.js","../src/component/generateScope.js","../src/dom/addStyles.js","../src/vDom/createTagNode.js","../src/utils/toKebabCase.js","../src/vDom/createComponentNode.js","../src/vDom/addClass.js","../src/component/createComponent.js","../src/component/emitMount.js","../src/dom/createDom.js","../src/dom/updateComponentDom.js","../src/component/setProps.js","../src/dom/updateDom.js","../src/dom/sameTypeAndTag.js","../src/component/removeChild.js","../src/utils/ModesteError.js","../src/component/render.js","../src/component/Component.js","../src/component/registerComponent.js","../src/main.js"],"sourcesContent":["export const ROOT_NAME = 'modesteRoot';\nexport const INTERNAL_VAR_NAME = '__modesteInternal';\n\nexport const COMMENT_NODE = window.Node.COMMENT_NODE;\nexport const ELEMENT_NODE = window.Node.ELEMENT_NODE;\nexport const TEXT_NODE = window.Node.TEXT_NODE;\n","export default function strictEqual(a, b) {\n  return a === b;\n}\n","import strictEqual from '../utils/strictEqual';\n\nexport default function shouldUpdateData(oldValue, newValue) {\n  return !strictEqual(oldValue, newValue);\n}\n","import shallowCompare from '../utils/shallowCompare';\n\nexport default function shouldUpdateProps(oldProps, newProps) {\n  return !shallowCompare(oldProps, newProps);\n}\n","import strictEqual from './strictEqual';\n\nexport default function shallowCompare(a, b) {\n  let aKeys = Object.keys(a);\n  let bKeys = Object.keys(b);\n\n  if (aKeys.length !== bKeys.length) return false;\n\n  for (let i = 0; i < aKeys.length; i++) {\n    let key = aKeys[i];\n    let index = bKeys.indexOf(key);\n\n    if (index < 0) return false;\n    if (!strictEqual(a[key], b[key])) return false;\n  }\n\n  return true;\n}\n","import { INTERNAL_VAR_NAME as m } from '../constants';\n\nconst HOOKS = [\n  'willCreate',\n  'didCreate',\n  'willMount',\n  'didMount',\n  'willUpdate',\n  'didUpdate',\n  'willRemove',\n  'didRemove',\n  'shouldUpdateData',\n  'shouldUpdateProps'\n];\n\nexport default function registerHooks(component, manifest) {\n  HOOKS.forEach(hook => {\n    if (manifest[hook]) component[m][hook] = manifest[hook].bind(component);\n  });\n}\n","import { INTERNAL_VAR_NAME as m } from '../constants';\n\nexport default function emitHook(component, hook) {\n  if (component[m][hook]) component[m][hook]();\n}\n","const MAX_VALUE = 1000000000000;\n\nexport default function generateId(store, middleware) {\n  let value, id;\n\n  do {\n    value = value\n      ? value + Math.floor(Math.random() * 35).toFixed(36)\n      : Math.floor(Math.random() * MAX_VALUE).toString(36);\n\n    id = value;\n    if (middleware) id = middleware(value);\n  } while (store[id]);\n\n  store[id] = true;\n\n  return id;\n}\n","import generateId from '../utils/generateId';\n\nconst scopes = {};\n\nexport default function generateScope(name) {\n  return generateId(scopes, id => `${name}_${id}`);\n}\n","export default function addStyles(style, scope) {\n  if (!style) return;\n\n  let styleElement = document.createElement('style');\n\n  if (scope) {\n    let regex = /:\\$/gm;\n    let repl = '.' + scope;\n\n    styleElement.textContent = style.replace(regex, repl);\n  } else {\n    styleElement.textContent = style;\n  }\n\n  document.head.appendChild(styleElement);\n\n  return styleElement;\n}\n","import toKebabCase from '../utils/toKebabCase';\n\nexport default function createTagNode(tag, opts, children) {\n  let props = {};\n  let attrs = {};\n\n  let node = { tag, props, attrs };\n\n  if (opts) {\n    if (opts instanceof Array) {\n      children = opts;\n    } else {\n      Object.keys(opts).forEach(key => {\n        switch (key[0]) {\n          case '_':\n            attrs[toKebabCase(key.substr(1))] = opts[key];\n            break;\n          case '$':\n            node[key.substr(1)] = opts[key];\n            break;\n          default:\n            props[key] = opts[key];\n        }\n      });\n    }\n  }\n\n  node.children = children ? children : [];\n\n  return node;\n}\n","export default function toKebabCase(str) {\n  let kebab = str.replace(/([A-Z])/g, '-$1').toLowerCase();\n  if (kebab[0] === '-') return kebab.substr(1);\n  return kebab;\n}\n","export default function createComponentNode(component, opts) {\n  let props = {};\n  let node = { component, props };\n\n  if (opts) {\n    Object.keys(opts).forEach(key => {\n      switch (key[0]) {\n        case '$':\n          node[key.substr(1)] = opts[key];\n          break;\n        default:\n          props[key] = opts[key];\n      }\n    });\n  }\n\n  return node;\n}\n","export default function addClass(vDom, className) {\n  if (!vDom || typeof vDom === 'string' || !className) return;\n  if (!vDom.component) {\n    if (!vDom.props.className) vDom.props.className = '';\n    if (!vDom.attrs.class) vDom.attrs.class = '';\n\n    vDom.props.className = `${vDom.props.className} ${className}`.trim();\n    vDom.attrs.class = `${vDom.attrs.class} ${className}`.trim();\n  }\n}\n","import { INTERNAL_VAR_NAME as m } from '../constants';\n\nexport default function createComponent(name, props, parent) {\n  if (parent[m].factories[name]) {\n    return parent[m].factories[name](props, parent);\n  }\n\n  return parent[m].app.factories[name](props, parent);\n}\n","import { INTERNAL_VAR_NAME as m } from '../constants';\nimport emitHook from './emitHook';\n\nexport default function emitMount(component) {\n  let children = component[m].children;\n  Object.keys(children).forEach(key => emitMount(children[key]));\n\n  component[m].mounted = true;\n  emitHook(component, 'didMount');\n}\n","import { INTERNAL_VAR_NAME as m } from '../constants';\nimport addClass from '../vDom/addClass';\nimport createComponent from '../component/createComponent';\nimport render from '../component/render';\nimport emitMount from '../component/emitMount';\n\nexport default function createDom(vDom, parent) {\n  addClass(vDom, parent[m].scope);\n\n  if (!vDom) {\n    return document.createComment('');\n  }\n\n  switch (typeof vDom) {\n    case 'string':\n      return document.createTextNode(vDom);\n\n    case 'object':\n      if (vDom.component) {\n        let component = createComponent(vDom.component, vDom.props, parent);\n\n        if (vDom.ref) vDom.ref(component);\n\n        render(component);\n        return component[m].dom;\n      }\n\n      let dom = document.createElement(vDom.tag);\n\n      dom[m] = {};\n      dom[m].attrs = {};\n      dom[m].props = {};\n\n      Object.keys(vDom.attrs).forEach(attr => {\n        if (vDom.attrs[attr] !== null) {\n          dom.setAttribute(attr, vDom.attrs[attr]);\n          dom[m].attrs[attr] = vDom.attrs[attr];\n        }\n      });\n\n      Object.keys(vDom.props).forEach(prop => {\n        if (vDom.props[prop] !== null) {\n          dom[prop] = vDom.props[prop];\n          dom[m].props[prop] = vDom.props[prop];\n        }\n      });\n\n      vDom.children.forEach(child => {\n        let childDom = createDom(child, parent);\n        dom.appendChild(childDom);\n\n        if (parent[m].mounted && childDom[m] && childDom[m].id) {\n          emitMount(parent[m].children[childDom[m].id]);\n        }\n      });\n\n      if (vDom.ref) vDom.ref(dom);\n\n      return dom;\n  }\n}\n","import { INTERNAL_VAR_NAME as m } from '../constants';\nimport createComponent from '../component/createComponent';\nimport setProps from '../component/setProps';\nimport render from '../component/render';\nimport emitMount from '../component/emitMount';\n\nexport default function updateComponentDom(dom, vDom, parent) {\n  if (dom[m] && dom[m].id) {\n    let id = dom[m].id;\n    let component = parent[m].children[id];\n\n    if (!vDom.props) vDom.props = {};\n\n    if (component[m].name === vDom.component) {\n      component[m].dom = dom;\n      setProps(component, vDom.props);\n\n      if (vDom.ref) vDom.ref(component);\n      return;\n    } else parent[m].removeChild(id);\n  }\n\n  let component = createComponent(vDom.component, vDom.props, parent);\n  component[m].dom = dom;\n\n  if (vDom.ref) vDom.ref(component);\n\n  render(component);\n\n  if (parent[m].mounted) emitMount(component);\n}\n","import { INTERNAL_VAR_NAME as m } from '../constants';\nimport render from '../component/render';\n\nexport default function setProps(component, props) {\n  if (component[m].shouldUpdateProps(component.props, props)) {\n    component[m].props = props;\n    render(component);\n  }\n}\n","import { INTERNAL_VAR_NAME as m, ELEMENT_NODE, TEXT_NODE } from '../constants';\nimport addClass from '../vDom/addClass';\nimport sameTypeAndTag from './sameTypeAndTag';\nimport updateComponentDom from './updateComponentDom';\nimport createDom from './createDom';\nimport removeChild from '../component/removeChild';\nimport emitMount from '../component/emitMount';\n\nexport default function updateDom(dom, vDom, parent) {\n  addClass(vDom, parent[m].scope);\n\n  if (vDom && vDom.component) {\n    updateComponentDom(dom, vDom, parent);\n    return;\n  }\n\n  if (!sameTypeAndTag(dom, vDom)) {\n    if (dom[m] && dom[m].id) {\n      removeChild(parent, dom[m].id);\n    }\n\n    let newDom = createDom(vDom, parent);\n    dom.parentNode.replaceChild(newDom, dom);\n\n    if (parent[m].dom === dom) {\n      parent[m].dom = newDom;\n    }\n\n    return;\n  }\n\n  switch (dom.nodeType) {\n    case ELEMENT_NODE:\n      // Process attrs\n      let attrs = [];\n\n      if (dom[m].attrs) {\n        Object.keys(dom[m].attrs).forEach(attr => {\n          attrs.push(attr);\n        });\n      }\n\n      if (!dom[m].attrs) dom[m].attrs = {};\n\n      Object.keys(vDom.attrs).forEach(attr => {\n        if (vDom.attrs[attr] === null) {\n          dom.removeAttribute(attr);\n          delete dom[m].attrs[attr];\n        } else if (dom[m].attrs[attr] !== vDom.attrs[attr]) {\n          dom.setAttribute(attr, vDom.attrs[attr]);\n          dom[m].attrs[attr] = vDom.attrs[attr];\n        }\n\n        let index = attrs.indexOf(attr);\n        if (index > -1) {\n          attrs.splice(index, 1);\n        }\n      });\n\n      attrs.forEach(attr => {\n        dom.removeAttribute(attr);\n        delete dom[m].attrs[attr];\n      });\n\n      // Process props\n      let props = [];\n\n      if (dom[m].props) {\n        Object.keys(dom[m].props).forEach(prop => {\n          props.push(prop);\n        });\n      }\n\n      if (!dom[m].props) dom[m].props = {};\n\n      Object.keys(vDom.props).forEach(prop => {\n        if (vDom.props[prop] === null) {\n          dom[prop] = null;\n          delete dom[m].props[prop];\n        } else if (dom[m].props[prop] !== vDom.props[prop]) {\n          dom[prop] = vDom.props[prop];\n          dom[m].props[prop] = vDom.props[prop];\n        }\n\n        let index = props.indexOf(prop);\n        if (index > -1) {\n          props.splice(index, 1);\n        }\n      });\n\n      props.forEach(prop => {\n        dom[prop] = null;\n        delete dom[m].props[prop];\n      });\n\n      // Process child nodes\n      if (!vDom.children) vDom.children = [];\n\n      vDom.children.forEach((child, index) => {\n        if (!dom.childNodes[index]) {\n          let childDom = createDom(child, parent);\n          dom.appendChild(childDom);\n\n          if (parent[m].mounted && childDom[m] && childDom[m].id) {\n            emitMount(parent[m].children[childDom[m].id]);\n          }\n        } else {\n          updateDom(dom.childNodes[index], child, parent);\n        }\n      });\n\n      while (dom.childNodes[vDom.children.length]) {\n        let child = dom.childNodes[vDom.children.length];\n        dom.removeChild(child);\n      }\n\n      // Run ref function\n      if (vDom.ref) vDom.ref(dom);\n\n      break;\n\n    case TEXT_NODE:\n      if (dom.nodeValue !== vDom) {\n        dom.nodeValue = vDom;\n      }\n      break;\n  }\n}\n","import { COMMENT_NODE, ELEMENT_NODE, TEXT_NODE } from '../constants';\n\nexport default function sameTypeAndTag(dom, vDom) {\n  if (!vDom) return dom.nodeType === COMMENT_NODE;\n\n  if (typeof vDom === 'object' && dom.nodeType === ELEMENT_NODE) {\n    return vDom.tag.toUpperCase() === dom.tagName;\n  } else if (typeof vDom === 'string' && dom.nodeType === TEXT_NODE) {\n    return true;\n  }\n\n  return false;\n}\n","import { INTERNAL_VAR_NAME as m } from '../constants';\nimport emitHook from './emitHook';\n\nexport default function removeChild(parent, id) {\n  if (parent[m].children[id]) {\n    let component = parent[m].children[id];\n\n    emitHook(component, 'willRemove');\n    delete component[m].dom;\n\n    Object.keys(component[m].children).forEach(id => {\n      removeChild(id, component);\n    });\n\n    emitHook(component, 'didRemove');\n    delete parent[m].children[id];\n  }\n}\n","export default class ModesteError extends Error {\n  constructor(...args) {\n    super(...args);\n    this.name = 'MODESTE Error';\n    this.message = '[MODESTE ERROR] ' + this.message;\n    Error.captureStackTrace(this, modesteError);\n  }\n}\n","import { INTERNAL_VAR_NAME as m } from '../constants';\nimport emitHook from './emitHook';\nimport t from '../vDom/createTagNode';\nimport c from '../vDom/createComponentNode';\nimport createDom from '../dom/createDom';\nimport updateDom from '../dom/updateDom';\nimport ModesteError from '../utils/ModesteError';\n\nexport default function render(component) {\n  const mounting = !component[m].dom;\n\n  if (mounting) emitHook(component, 'willMount');\n  else emitHook(component, 'willUpdate');\n\n  let vDom = component[m].render(t, c);\n\n  if (typeof vDom !== 'object' || vDom.component || !vDom.tag) {\n    throw new ModesteError(\n      `${component[m].name}: Component root must be a tag`\n    );\n  }\n\n  if (mounting) {\n    component[m].dom = createDom(vDom, component, true);\n  } else {\n    updateDom(component[m].dom, vDom, component, true);\n  }\n\n  component[m].dom[m].id = component[m].id;\n\n  if (!mounting) emitHook(component, 'didUpdate');\n}\n","import { INTERNAL_VAR_NAME as m } from '../constants';\nimport shouldUpdateData from './shouldUpdateData';\nimport shouldUpdateProps from './shouldUpdateProps';\nimport registerHooks from './registerHooks';\nimport emitHook from './emitHook';\nimport registerComponent from './registerComponent';\nimport render from './render';\n\nexport default class Component {\n  constructor(opts, parent) {\n    this[m] = {};\n\n    if (!opts.manifest.factories) opts.manifest.factories = {};\n\n    this[m].factories = opts.manifest.factories;\n    this[m].parent = parent;\n    this[m].app = parent ? parent[m].app : this;\n    this[m].name = opts.name;\n    this[m].id = opts.id;\n    this[m].scope = opts.scope;\n    this[m].children = {};\n    this[m].props = opts.props ? opts.props : {};\n\n    this[m].render = opts.manifest.render.bind(this);\n    this[m].shouldUpdateData = shouldUpdateData;\n    this[m].shouldUpdateProps = shouldUpdateProps;\n\n    registerHooks(this, opts.manifest);\n    emitHook(this, 'willCreate');\n\n    if (opts.manifest.data) {\n      this[m].data = opts.manifest.data();\n\n      Object.keys(this[m].data).forEach(prop =>\n        Object.defineProperty(this, prop, {\n          enumerable: true,\n          get: function() {\n            return this[m].data[prop];\n          },\n          set: function(value) {\n            if (this[m].shouldUpdateData(this[m].data[prop], value)) {\n              this[m].data[prop] = value;\n              render(this);\n            }\n          }\n        })\n      );\n    }\n\n    if (opts.manifest.components) {\n      Object.keys(opts.manifest.components).forEach(name => {\n        registerComponent(this, name, opts.manifest.components[name]);\n      });\n    }\n\n    if (opts.manifest.methods) {\n      Object.keys(opts.manifest.methods).forEach(method => {\n        this[method] = opts.manifest.methods[method].bind(this);\n      });\n    }\n\n    emitHook(this, 'didCreate');\n  }\n\n  render() {\n    render(this);\n  }\n\n  get props() {\n    return this[m].props;\n  }\n}\n","import { INTERNAL_VAR_NAME as m } from '../constants';\nimport Component from './Component';\nimport generateScope from './generateScope';\nimport generateId from '../utils/generateId';\nimport addStyles from '../dom/addStyles';\n\nexport default function registerComponent(parent, name, manifest) {\n  if (!parent[m].factories[name]) {\n    let scope = manifest.scope !== false ? generateScope(name) : false;\n\n    addStyles(manifest.style(), scope);\n\n    parent[m].factories[name] = (props, parent) => {\n      let id = generateId(parent[m].children);\n\n      let component = new Component(\n        {\n          name,\n          manifest,\n          scope,\n          id,\n          props\n        },\n        parent\n      );\n\n      parent[m].children[id] = component;\n\n      return component;\n    };\n  }\n}\n","import { ROOT_NAME, INTERNAL_VAR_NAME as m } from './constants';\nimport Component from './component/Component';\nimport generateScope from './component/generateScope';\nimport addStyles from './dom/addStyles';\nimport emitMount from './component/emitMount';\n\nlet scope = generateScope(ROOT_NAME);\n\nexport default class Modeste extends Component {\n  constructor(manifest, props) {\n    super({\n      name: ROOT_NAME,\n      id: ROOT_NAME,\n      manifest,\n      props,\n      scope\n    });\n\n    if (manifest.style) addStyles(manifest.style(), scope);\n    this[m].wrap = manifest.selector\n      ? document.querySelector(manifest.selector)\n      : null;\n  }\n\n  render() {\n    super.render();\n\n    if (!this[m].mounted && !this[m].wrap) return emitMount(this);\n\n    if (this[m].wrap && this[m].wrap.childNodes.length === 0) {\n      this[m].wrap.appendChild(this[m].dom);\n      emitMount(this);\n    }\n  }\n\n  get $dom() {\n    return this[m].dom;\n  }\n}\n"],"names":["ROOT_NAME","INTERNAL_VAR_NAME","COMMENT_NODE","window","Node","ELEMENT_NODE","TEXT_NODE","strictEqual","a","b","shouldUpdateData","oldValue","newValue","shouldUpdateProps","oldProps","newProps","aKeys","Object","keys","bKeys","length","i","key","indexOf","shallowCompare","HOOKS","emitHook","component","hook","m","MAX_VALUE","generateId","store","middleware","value","id","Math","floor","random","toFixed","toString","scopes","generateScope","name","addStyles","style","scope","styleElement","document","createElement","repl","textContent","replace","head","appendChild","createTagNode","tag","opts","children","props","attrs","node","Array","forEach","str","substr","kebab","toLowerCase","createComponentNode","addClass","vDom","className","class","trim","createComponent","parent","factories","app","emitMount","mounted","createDom","createComment","createTextNode","ref","dom","attr","setAttribute","prop","childDom","child","updateComponentDom","removeChild","updateDom","nodeType","toUpperCase","tagName","newDom","parentNode","replaceChild","push","removeAttribute","index","splice","childNodes","nodeValue","ModesteError","args","message","_this","captureStackTrace","modesteError","Error","render","mounting","t","c","Component","manifest","this","bind","data","defineProperty","components","methods","method","wrap","selector","querySelector"],"mappings":"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"}