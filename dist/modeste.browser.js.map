{"version":3,"file":"modeste.browser.js","sources":["../src/constants.js","../src/utils/strictEqual.js","../src/component/shouldUpdateData.js","../src/component/shouldUpdateProps.js","../src/utils/shallowCompare.js","../src/component/registerHooks.js","../src/component/emitHook.js","../src/utils/generateId.js","../src/component/generateScope.js","../src/dom/addStyles.js","../src/render/tag.js","../src/render/component.js","../src/dom/prepareVDom.js","../src/utils/toKebabCase.js","../src/component/createComponent.js","../src/dom/createDom.js","../src/dom/updateComponentDom.js","../src/component/setProps.js","../src/dom/updateDom.js","../src/dom/sameTypeAndTag.js","../src/component/removeChild.js","../src/utils/ModesteError.js","../src/component/render.js","../src/component/Component.js","../src/component/registerComponent.js","../src/main.js"],"sourcesContent":["export const ROOT_NAME = 'modesteRoot';\r\nexport const INTERNAL_VAR_NAME = '__modesteInternal';\r\n\r\nexport const COMMENT_NODE = window.Node.COMMENT_NODE;\r\nexport const ELEMENT_NODE = window.Node.ELEMENT_NODE;\r\nexport const TEXT_NODE = window.Node.TEXT_NODE;\r\n","export default function strictEqual(a, b) {\r\n  return a === b;\r\n}\r\n","import strictEqual from '../utils/strictEqual';\r\n\r\nexport default function shouldUpdateData(oldValue, newValue) {\r\n  return !strictEqual(oldValue, newValue);\r\n}\r\n","import shallowCompare from '../utils/shallowCompare';\r\n\r\nexport default function shouldUpdateProps(oldProps, newProps) {\r\n  return !shallowCompare(oldProps, newProps);\r\n}\r\n","import strictEqual from './strictEqual';\r\n\r\nexport default function shallowCompare(a, b) {\r\n  let aKeys = Object.keys(a);\r\n  let bKeys = Object.keys(b);\r\n\r\n  if (aKeys.length !== bKeys.length) return false;\r\n\r\n  for (let i = 0; i < aKeys.length; i++) {\r\n    let key = aKeys[i];\r\n    let index = bKeys.indexOf(key);\r\n\r\n    if (index < 0) return false;\r\n    if (!strictEqual(a[key], b[key])) return false;\r\n  }\r\n\r\n  return true;\r\n}\r\n","import { INTERNAL_VAR_NAME as m } from '../constants';\r\n\r\nconst HOOKS = [\r\n  'willCreate',\r\n  'didCreate',\r\n  'willMount',\r\n  'didMount',\r\n  'willUpdate',\r\n  'didUpdate',\r\n  'willRemove',\r\n  'didRemove',\r\n  'shouldUpdateData',\r\n  'shouldUpdateProps'\r\n];\r\n\r\nexport default function registerHooks(component, manifest) {\r\n  HOOKS.forEach(hook => {\r\n    if (manifest[hook]) component[m][hook] = manifest[hook].bind(component);\r\n  });\r\n}\r\n","import { INTERNAL_VAR_NAME as m } from '../constants';\r\n\r\nexport default function emitHook(component, hook) {\r\n  if (component[m][hook]) component[m][hook]();\r\n}\r\n","export default function generateId(maxValue, store, middleware) {\r\n  let id;\r\n\r\n  do {\r\n    id = (Math.random() * maxValue).toFixed(0);\r\n    if (middleware) id = middleware(id);\r\n  } while (store[id]);\r\n\r\n  store[id] = true;\r\n\r\n  return id;\r\n}\r\n","import generateId from '../utils/generateId';\r\n\r\nconst scopes = {};\r\n\r\nexport default function generateScope(name) {\r\n  return generateId(1000000, scopes, id => `__${name}_${id}__`);\r\n}\r\n","export default function addStyles(style, scope) {\r\n  if (!style) return;\r\n\r\n  let styleElement = document.createElement('style');\r\n\r\n  let regex = /:\\$/gm;\r\n  let repl = '.' + scope;\r\n\r\n  styleElement.textContent = style.replace(regex, repl);\r\n\r\n  document.head.appendChild(styleElement);\r\n\r\n  return styleElement;\r\n}\r\n","export default function tag(tag, opts, children) {\r\n  let props = {};\r\n  let attrs = {};\r\n  let node = { tag, props, attrs, children };\r\n\r\n  if (opts) {\r\n    Object.keys(opts).forEach(key => {\r\n      switch (key[0]) {\r\n        case '_':\r\n          attrs[key.substr(1)] = opts[key];\r\n          break;\r\n        case '$':\r\n          node[key.substr(1)] = opts[key];\r\n          break;\r\n        default:\r\n          props[key] = opts[key];\r\n      }\r\n    });\r\n  }\r\n\r\n  return node;\r\n}\r\n","export default function component(component, opts) {\r\n  let props = {};\r\n  let node = { component, props };\r\n\r\n  if (opts) {\r\n    Object.keys(opts).forEach(key => {\r\n      switch (key[0]) {\r\n        case '$':\r\n          node[key.substr(1)] = opts[key];\r\n          break;\r\n        default:\r\n          props[key] = opts[key];\r\n      }\r\n    });\r\n  }\r\n\r\n  return node;\r\n}\r\n","import toKebabCase from '../utils/toKebabCase';\r\n\r\nexport default function prepareVDom(vDom, scope) {\r\n  if (!vDom || typeof vDom === 'string') return;\r\n  if (!vDom.children) vDom.children = [];\r\n  if (!vDom.props) vDom.props = {};\r\n\r\n  if (!vDom.component) {\r\n    if (!vDom.attrs) vDom.attrs = {};\r\n    else {\r\n      let kebabAttrs = {};\r\n\r\n      Object.keys(vDom.attrs).forEach(attr => {\r\n        kebabAttrs[toKebabCase(attr)] = vDom.attrs[attr];\r\n      });\r\n\r\n      vDom.attrs = kebabAttrs;\r\n    }\r\n\r\n    if (vDom.props.className) {\r\n      delete vDom.attrs.class;\r\n      vDom.props.className = scope + ' ' + vDom.props.className;\r\n    } else {\r\n      if (!vDom.attrs.class) vDom.props.className = scope;\r\n      else vDom.attrs.class = scope + ' ' + vDom.attrs.class;\r\n    }\r\n  }\r\n}\r\n","export default function toKebabCase(str) {\r\n  return str.replace(/([A-Z])/g, '-$1').toLowerCase();\r\n}\r\n","import { INTERNAL_VAR_NAME as m } from '../constants';\r\n\r\nexport default function createComponent(name, props, parent) {\r\n  if (parent[m].factories[name]) {\r\n    return parent[m].factories[name](props, parent);\r\n  }\r\n\r\n  return parent[m].app.factories[name](props, parent);\r\n}\r\n","import { INTERNAL_VAR_NAME as m } from '../constants';\r\nimport prepareVDom from './prepareVDom';\r\nimport createComponent from '../component/createComponent';\r\nimport render from '../component/render';\r\n\r\nexport default function createDom(vDom, parent) {\r\n  prepareVDom(vDom, parent[m].scope);\r\n\r\n  if (!vDom) {\r\n    return document.createComment('');\r\n  }\r\n\r\n  switch (typeof vDom) {\r\n    case 'string':\r\n      return document.createTextNode(vDom);\r\n\r\n    case 'object':\r\n      if (vDom.component) {\r\n        let component = createComponent(vDom.component, vDom.props, parent);\r\n\r\n        if (vDom.ref) vDom.ref(component);\r\n\r\n        render(component);\r\n        return component[m].dom;\r\n      }\r\n\r\n      let dom = document.createElement(vDom.tag);\r\n\r\n      dom[m] = {};\r\n      dom[m].attrs = {};\r\n      dom[m].props = {};\r\n\r\n      Object.keys(vDom.attrs).forEach(attr => {\r\n        if (vDom.attrs[attr] !== null) {\r\n          dom.setAttribute(attr, vDom.attrs[attr]);\r\n          dom[m].attrs[attr] = vDom.attrs[attr];\r\n        }\r\n      });\r\n\r\n      Object.keys(vDom.props).forEach(prop => {\r\n        if (vDom.props[prop] !== null) {\r\n          dom[prop] = vDom.props[prop];\r\n          dom[m].props[prop] = vDom.props[prop];\r\n        }\r\n      });\r\n\r\n      vDom.children.forEach(child => {\r\n        dom.appendChild(createDom(child, parent));\r\n      });\r\n\r\n      if (vDom.ref) vDom.ref(dom);\r\n\r\n      return dom;\r\n  }\r\n}\r\n","import { INTERNAL_VAR_NAME as m } from '../constants';\r\nimport createComponent from '../component/createComponent';\r\nimport setProps from '../component/setProps';\r\nimport render from '../component/render';\r\n\r\nexport default function updateComponentDom(dom, vDom, parent) {\r\n  if (dom[m] && dom[m].id) {\r\n    let id = dom[m].id;\r\n    let component = parent[m].children[id];\r\n\r\n    if (!vDom.props) vDom.props = {};\r\n\r\n    if (component[m].name === vDom.component) {\r\n      component[m].dom = dom;\r\n      setProps(component, vDom.props);\r\n\r\n      if (vDom.ref) vDom.ref(component);\r\n      return;\r\n    } else parent[m].removeChild(id);\r\n  }\r\n\r\n  let component = createComponent(vDom.component, vDom.props, parent);\r\n  component[m].dom = dom;\r\n\r\n  if (vDom.ref) vDom.ref(component);\r\n\r\n  render(component);\r\n}\r\n","import { INTERNAL_VAR_NAME as m } from '../constants';\r\n\r\nexport default function setProps(component, props) {\r\n  if (component[m].shouldUpdateProps(component.props, props)) {\r\n    component.props = props;\r\n    render(component);\r\n  }\r\n}\r\n","import { INTERNAL_VAR_NAME as m } from '../constants';\r\nimport prepareVDom from './prepareVDom';\r\nimport sameTypeAndTag from './sameTypeAndTag';\r\nimport updateComponentDom from './updateComponentDom';\r\nimport createDom from './createDom';\r\nimport removeChild from '../component/removeChild';\r\n\r\nexport default function updateDom(dom, vDom, parent) {\r\n  prepareVDom(vDom, parent[m].scope);\r\n\r\n  if (vDom && vDom.component) {\r\n    updateComponentDom(dom, vDom, parent);\r\n    return;\r\n  }\r\n\r\n  if (!sameTypeAndTag(dom, vDom)) {\r\n    if (dom[m] && dom[m].id) {\r\n      removeChild(parent, dom[m].id);\r\n    }\r\n\r\n    let newDom = createDom(vDom, parent);\r\n    dom.parentNode.replaceChild(newDom, dom);\r\n\r\n    if (parent[m].dom === dom) {\r\n      parent[m].dom = newDom;\r\n    }\r\n\r\n    return;\r\n  }\r\n\r\n  switch (dom.nodeType) {\r\n    case 1:\r\n      // Process attrs\r\n      let attrs = [];\r\n\r\n      if (dom[m].attrs) {\r\n        Object.keys(dom[m].attrs).forEach(attr => {\r\n          attrs.push(attr);\r\n        });\r\n      }\r\n\r\n      if (!dom[m].attrs) dom[m].attrs = {};\r\n\r\n      Object.keys(vDom.attrs).forEach(attr => {\r\n        if (vDom.attrs[attr] === null) {\r\n          dom.removeAttribute(attr);\r\n          delete dom[m].attrs[attr];\r\n        } else if (dom[attr] !== vDom.attrs[attr]) {\r\n          dom.setAttribute(attr, vDom.attrs[attr]);\r\n          dom[m].attrs[attr] = vDom.attrs[attr];\r\n        }\r\n\r\n        let index = attrs.indexOf(attr);\r\n        if (index > -1) {\r\n          attrs.splice(index, 1);\r\n        }\r\n      });\r\n\r\n      attrs.forEach(attr => {\r\n        dom.removeAttribute(attr);\r\n        delete dom[m].attrs[attr];\r\n      });\r\n\r\n      // Process props\r\n      let props = [];\r\n\r\n      if (dom[m].props) {\r\n        Object.keys(dom[m].props).forEach(prop => {\r\n          props.push(prop);\r\n        });\r\n      }\r\n\r\n      if (!dom[m].props) dom[m].props = {};\r\n\r\n      Object.keys(vDom.props).forEach(prop => {\r\n        if (vDom.props[prop] === null) {\r\n          dom[prop] = null;\r\n          delete dom[m].props[prop];\r\n        } else if (dom[prop] !== vDom.props[prop]) {\r\n          dom[prop] = vDom.props[prop];\r\n          dom[m].props[prop] = vDom.props[prop];\r\n        }\r\n\r\n        let index = props.indexOf(prop);\r\n        if (index > -1) {\r\n          props.splice(index, 1);\r\n        }\r\n      });\r\n\r\n      props.forEach(prop => {\r\n        dom[prop] = null;\r\n        delete dom[m].props[prop];\r\n      });\r\n\r\n      // Process child nodes\r\n      if (!vDom.children) vDom.children = [];\r\n\r\n      vDom.children.forEach((child, index) => {\r\n        if (!dom.childNodes[index]) {\r\n          dom.appendChild(createDom(child, parent));\r\n        } else {\r\n          updateDom(dom.childNodes[index], child, parent);\r\n        }\r\n      });\r\n\r\n      while (dom.childNodes[vDom.children.length]) {\r\n        let child = dom.childNodes[vDom.children.length];\r\n        dom.removeChild(child);\r\n      }\r\n\r\n      // Run ref function\r\n      if (vDom.ref) vDom.ref(dom);\r\n\r\n      break;\r\n\r\n    case 3:\r\n      if (dom.nodeValue !== vDom) {\r\n        dom.nodeValue = vDom;\r\n      }\r\n      break;\r\n  }\r\n}\r\n","import { COMMENT_NODE, ELEMENT_NODE, TEXT_NODE } from '../constants';\r\n\r\nexport default function sameTypeAndTag(dom, vDom) {\r\n  if (!vDom) return dom.nodeType === COMMENT_NODE;\r\n\r\n  if (typeof vDom === 'object' && dom.nodeType === ELEMENT_NODE) {\r\n    return vDom.tag.toUpperCase() === dom.tagName;\r\n  } else if (typeof vDom === 'string' && dom.nodeType === TEXT_NODE) {\r\n    return true;\r\n  }\r\n\r\n  return false;\r\n}\r\n","import { INTERNAL_VAR_NAME as m } from '../constants';\r\nimport emitHook from './emitHook';\r\n\r\nexport default function removeChild(parent, id) {\r\n  if (parent[m].children[id]) {\r\n    let component = parent[m].children[id];\r\n\r\n    emitHook(component, 'willRemove');\r\n    delete component[m].dom;\r\n\r\n    Object.keys(component[m].children).forEach(id => {\r\n      removeChild(id, component);\r\n    });\r\n\r\n    emitHook(component, 'didRemove');\r\n    delete parent[m].children[id];\r\n  }\r\n}\r\n","export default class ModesteError extends Error {\r\n  constructor(...args) {\r\n    super(...args);\r\n    this.name = 'MODESTE Error';\r\n    this.message = '[MODESTE ERROR] ' + this.message;\r\n    Error.captureStackTrace(this, modesteError);\r\n  }\r\n}\r\n","import { INTERNAL_VAR_NAME as m } from '../constants';\r\nimport emitHook from './emitHook';\r\nimport t from '../render/tag';\r\nimport c from '../render/component';\r\nimport createDom from '../dom/createDom';\r\nimport updateDom from '../dom/updateDom';\r\nimport ModesteError from '../utils/ModesteError';\r\n\r\nexport default function render(component) {\r\n  let isMounting = !component[m].dom;\r\n\r\n  if (isMounting) emitHook(component, 'willMount');\r\n  else emitHook(component, 'willUpdate');\r\n\r\n  let vDom = component[m].render(t, c);\r\n\r\n  if (typeof vDom !== 'object' || vDom.component || !vDom.tag) {\r\n    throw new ModesteError(\r\n      `${component[m].name}: Component root must be a tag`\r\n    );\r\n  }\r\n\r\n  if (isMounting) {\r\n    component[m].dom = createDom(vDom, component, true);\r\n  } else {\r\n    updateDom(component[m].dom, vDom, component, true);\r\n  }\r\n\r\n  component[m].dom[m].id = component[m].id;\r\n\r\n  if (isMounting) emitHook(component, 'didMount');\r\n  else emitHook(component, 'didUpdate');\r\n}\r\n","import { INTERNAL_VAR_NAME as m } from '../constants';\r\nimport shouldUpdateData from './shouldUpdateData';\r\nimport shouldUpdateProps from './shouldUpdateProps';\r\nimport registerHooks from './registerHooks';\r\nimport emitHook from './emitHook';\r\nimport registerComponent from './registerComponent';\r\nimport render from './render';\r\n\r\nexport default class Component {\r\n  constructor(opts, app) {\r\n    this[m] = {};\r\n\r\n    if (!opts.manifest.factories) opts.manifest.factories = {};\r\n\r\n    this[m].factories = opts.manifest.factories;\r\n    this[m].app = app ? app : this;\r\n    this[m].name = opts.name;\r\n    this[m].id = opts.id;\r\n    this[m].scope = opts.scope;\r\n    this[m].children = {};\r\n\r\n    this[m].render = opts.manifest.render.bind(this);\r\n    this[m].shouldUpdateData = shouldUpdateData;\r\n    this[m].shouldUpdateProps = shouldUpdateProps;\r\n\r\n    registerHooks(this, opts.manifest);\r\n    emitHook(this, 'willCreate');\r\n\r\n    this.props = opts.props ? opts.props : {};\r\n\r\n    if (opts.manifest.data) {\r\n      this[m].data = opts.manifest.data();\r\n\r\n      Object.keys(this[m].data).forEach(prop =>\r\n        Object.defineProperty(this, prop, {\r\n          enumerable: true,\r\n          get: function() {\r\n            return this[m].data[prop];\r\n          },\r\n          set: function(value) {\r\n            if (this[m].shouldUpdateData(this[m].data[prop], value)) {\r\n              this[m].data[prop] = value;\r\n              render(this);\r\n            }\r\n          }\r\n        })\r\n      );\r\n    }\r\n\r\n    if (opts.manifest.components) {\r\n      Object.keys(opts.manifest.components).forEach(name => {\r\n        registerComponent(this, name, opts.manifest.components[name]);\r\n      });\r\n    }\r\n\r\n    if (opts.manifest.methods) {\r\n      Object.keys(opts.manifest.methods).forEach(method => {\r\n        this[method] = opts.manifest.methods[method].bind(this);\r\n      });\r\n    }\r\n\r\n    emitHook(this, 'didCreate');\r\n  }\r\n\r\n  render() {\r\n    render(this);\r\n  }\r\n}\r\n","import { INTERNAL_VAR_NAME as m } from '../constants';\r\nimport Component from './Component';\r\nimport generateScope from './generateScope';\r\nimport generateId from '../utils/generateId';\r\nimport addStyles from '../dom/addStyles';\r\n\r\nexport default function registerComponent(parent, name, manifest) {\r\n  if (!parent[m].factories[name]) {\r\n    let scope = generateScope(name);\r\n\r\n    addStyles(manifest.style(), scope);\r\n\r\n    parent[m].factories[name] = (props, parent) => {\r\n      let id = generateId(1000000, parent[m].children);\r\n\r\n      let component = new Component(\r\n        {\r\n          name,\r\n          manifest,\r\n          scope,\r\n          id,\r\n          props\r\n        },\r\n        parent[m].app\r\n      );\r\n\r\n      parent[m].children[id] = component;\r\n\r\n      return component;\r\n    };\r\n  }\r\n}\r\n","import { ROOT_NAME, INTERNAL_VAR_NAME as m } from './constants';\r\nimport Component from './component/Component';\r\nimport generateScope from './component/generateScope';\r\nimport addStyles from './dom/addStyles';\r\n\r\nlet scope = generateScope(ROOT_NAME);\r\n\r\nexport default class Modeste extends Component {\r\n  constructor(manifest) {\r\n    super({\r\n      name: ROOT_NAME,\r\n      id: ROOT_NAME,\r\n      manifest,\r\n      scope\r\n    });\r\n\r\n    if (manifest.style) addStyles(manifest.style(), scope);\r\n    this[m].wrap = document.querySelector(manifest.selector);\r\n  }\r\n\r\n  render() {\r\n    super.render();\r\n\r\n    if (this[m].wrap.childNodes.length === 0) {\r\n      this[m].wrap.appendChild(this[m].dom);\r\n    }\r\n  }\r\n}\r\n"],"names":["ROOT_NAME","INTERNAL_VAR_NAME","COMMENT_NODE","window","Node","ELEMENT_NODE","TEXT_NODE","strictEqual","a","b","shouldUpdateData","oldValue","newValue","shouldUpdateProps","oldProps","newProps","aKeys","Object","keys","bKeys","length","i","key","indexOf","shallowCompare","HOOKS","emitHook","component","hook","m","generateId","maxValue","store","middleware","id","Math","random","toFixed","scopes","generateScope","name","addStyles","style","scope","styleElement","document","createElement","repl","textContent","replace","head","appendChild","tag","opts","children","props","attrs","node","forEach","substr","prepareVDom","vDom","kebabAttrs","str","attr","toLowerCase","className","class","createComponent","parent","factories","app","createDom","createComment","createTextNode","ref","dom","setAttribute","prop","child","updateComponentDom","removeChild","updateDom","nodeType","toUpperCase","tagName","newDom","parentNode","replaceChild","push","removeAttribute","index","splice","childNodes","nodeValue","ModesteError","args","message","_this","captureStackTrace","modesteError","Error","render","isMounting","t","c","Component","manifest","this","bind","data","defineProperty","value","components","methods","method","wrap","querySelector","selector"],"mappings":"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"}